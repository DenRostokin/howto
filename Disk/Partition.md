Для просмотра всех подключённых дисков используется команда:

$ lsblk

Для просмотра информации по конкретному диску, спользуется:

$ sudo fdisk -l /dev/sdb

Узнать, в каком разделе мы сейчас работаем, можно командой:

$ df .

Разбить диск на разделы в коммандной строке можно командой cfdisk или fdisk:

$ sudo fdisk /dev/sdb

Дальнейшая работа производится в интерактивном режиме! Я не нашёл, как в cfdisk создать таблицу разделов GPT, поэтому для этой цели воспользовался fdisk. Для создания GPT вводим g, а затем w. После этого происходит выход из программы. Дальше уже можно использовать cfdisk.

Для форматирования разделов используется команда mkfs. Например, для форматирования в FAT32 (для UEFI):

$ sudo mkfs.vfat -F32 /dev/sdb1

А для ext4:

$ sudo mkfs.ext4 /dev/sdb2

Для форматирования swap-раздела используется:

$ sudo mkswap /dev/sdb3

Важным моментом в производительности и сроке службы жёсткого диска является выравнивание разделов по физическим секторам. У жёсткого диска кроме физических секторов также есть и логические сектора. Раньше были только физические сектора размером 512 байт. Но потом диски улучшались и увеличивался также размер сектора. Сейчас у меня диск с размером сектора 4096 байт, или 4 килобайта. Но для целей обратной совместимости было введено такое понятие, как логический сектор жёсткого диска, который остался равен 512 байтам. Увидеть данную информацию о своём жёстком диске можно коммандой:

$ sudo fdisk -l /dev/sda

В выводе будет вот такая строка:

Размер сектора (логический/физический): 512 байт / 4096 байт

Теперь нужно разобраться, какие разделы создаются на жёстком диске. В самом начале диска создаётся таблица разделов - GPT. Она занимает 1MiB. Затем идём раздел по EFI, который в моём случае равен 512 MiB. Последним идёт основной раздел, который занимает всё оставшееся пространство. Вот как выглядит вывод fdisk:

Уст-во      Начало        Конец     Секторы     Размер   Тип
/dev/sda1     2048      1050623     1048576       512M   EFI
/dev/sda2  1050624    625142414   624091791

Мы видим, что первый раздел на диске идёт с 2048-го сектора. Отсчёт секторов ведётся с нуля. В данной таблице указываются логические сектора. нужно понять, ровно ли логические сектора "лежат" на физических, т.е. в определённом количестве логических секторов должно быть целое количество физических. Проверить это очень легко. Размер логического сектора == 512 байт. Размер физического == 4096 байт, т.е. он в 8 раз больше. Значит, если разделить количество логических секторов на 8, то мы получим количество физических секторов. 2048 / 8 == 256. Мы получили целое число, значит секторы для GPT на диске выровнены! То же самое проделаем с /dev/sda1. Он занимает 1048576 секторов. Делим: 1048576 / 8 == 131072 физических сектора. Тоже ровно! Проверяем для /dev/sda2: 624091791 / 8 == 78011474. Всё чётко!

Также информацию о размеров секторов, например физических, можно получить коммандой lsblk:

$ lsblk -o NAME,PHY-SEC /dev/sda

Будут выведены только 2 столбца. О других столбцах можно узнать из вывода lsblk --help.

Проверить, выровнен ли раздел, можно коммандой parted, а точнее её подкоммандой align-check.

$ sudo parted /dev/sda

Появится интерактивный ввод. Вводим: align-check. Выбираем оптимальный тип выравнивания (по умолчанию). Вводим номер раздела. Программа сообщает нам, выровнен ли раздел или нет!
